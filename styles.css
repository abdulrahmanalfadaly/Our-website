/* Flexi OSSD Challenge Styles */
:root{
	--bg:#009dc493; /* bright cyan */
	--accent:#f06143; /* orange */
	--text:#0e2a33;
	--light:#ffffff;
	--muted:#e6eef1;
	--card:#ffffff;
	--shadow:0 10px 30px rgba(0,0,0,.15);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
	margin:0;
	font-family:"Nunito", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
	background:var(--muted);
	color:var(--text);
}

.screen{display:none !important; min-height:100dvh}
.screen.active{display:block !important; animation:fadeIn .28s ease}
@keyframes fadeIn{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}

/* Home */
#screen-home.active{display:grid !important; place-items:center}
#screen-home{position:relative; overflow:hidden; min-height:100vh}
.hero-bg{position:absolute; inset:0; background:linear-gradient(120deg, rgba(19, 151, 188, 0.509), rgba(2, 44, 54, 0.61)), url('img/bg_home.jpg') center/cover no-repeat; background-blend-mode:normal}
.hero{position:relative; z-index:1; width:min(920px,92%); background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.25); backdrop-filter: blur(6px); padding:32px; border-radius:18px; color:#fff; text-align:center; box-shadow:var(--shadow)}
.hero-mascot{width:120px; height:auto; display:block; margin:0 auto 12px auto; filter:drop-shadow(0 6px 10px rgba(0,0,0,.35))}
.subtitle{opacity:.95; margin-top:-4px}
.field{display:block; margin:16px auto; text-align:left; max-width:520px}
.field span{display:block; margin-bottom:8px; font-weight:700}
.field input,.field select{width:100%; height:48px; padding:0 14px; border-radius:12px; border:none}
.buttons{display:flex; gap:12px; justify-content:center; margin-top:18px; flex-wrap:wrap}

.btn{appearance:none; border:none; border-radius:12px; padding:12px 18px; font-weight:800; cursor:pointer; background:#e9f1f4; transition:transform .06s ease, filter .2s ease}
.btn[disabled]{opacity:.5; cursor:not-allowed}
.btn.primary{background:var(--bg); color:#fff}
.btn.accent{background:var(--accent); color:#fff}
.btn.ghost{background:transparent; border:2px dashed var(--bg); color:var(--bg)}
.btn[data-variant="light"]{background:#fff}
.btn:not([disabled]):active{transform:translateY(1px)}
.btn:focus-visible{outline:3px solid #9ad4e2; outline-offset:2px}

/* Level */
#screen-level{position:relative; background:linear-gradient(135deg, #009ec4, #0085a9)}
.level-bg{position:absolute; inset:0; background:url('img/bg_grade1.jpg') center/cover no-repeat; opacity:.3}
.topbar{position:sticky; top:0; z-index:3; display:grid; grid-template-columns:1fr auto 1fr; align-items:center; padding:10px 16px; background:#ffffffcc; backdrop-filter:blur(8px); border-bottom:1px solid #d7e3e8; gap:16px}
.topbar-left{display:flex; align-items:center; justify-content:flex-start}
.brand-logo{height:40px; width:auto; object-fit:contain}
.session{display:flex; align-items:center; justify-content:center; gap:8px}
.pill{display:inline-block; background:var(--accent); color:#fff; padding:4px 8px; border-radius:999px}
.topbar-right{display:flex; align-items:center; justify-content:flex-end; gap:12px}
.timer{font-weight:900}
.progress-wrap{width:200px}
.progress{height:10px; background:#e6eef1; border-radius:999px; overflow:hidden}
.progress-bar{height:100%; background:var(--accent); width:0}

.level-inner{position:relative; display:grid; grid-template-columns:260px 1fr; gap:18px; padding:18px}
.mascot{background:var(--card); border-radius:16px; padding:16px; box-shadow:var(--shadow); align-self:start}
.mascot img{width:100%; height:auto; transition:opacity .3s ease, transform .3s ease}
.mascot img.changing{opacity:0; transform:scale(0.95)}
.speech{margin-top:10px; background:#f4fafc; border:1px dashed var(--bg); padding:10px; border-radius:12px; transition:all .3s ease}
.stage{background:var(--card); border-radius:16px; padding:18px; box-shadow:var(--shadow)}
.mini-progress-wrap{margin:16px 0; padding:12px; background:#f8fbfc; border-radius:8px}
.mini-progress-label{font-size:14px; font-weight:700; margin-bottom:6px; color:var(--bg)}
.mini-progress{height:8px; background:#e6eef1; border-radius:999px; overflow:hidden}
.mini-progress-bar{height:100%; background:var(--accent); width:0; transition:width .3s ease}
.instructions{opacity:.8}
.answer-area{margin-top:12px}
.quiz-question{font-size:20px; font-weight:700; margin:16px 0; color:var(--text)}
.options{display:grid; gap:10px; margin:16px 0}
.option-btn{width:100%; text-align:left; padding:14px; border:2px solid #ddd; border-radius:10px; background:#fff; font-size:16px; cursor:pointer; transition:all .2s ease}
.option-btn:hover{border-color:var(--bg); background:#f0f9fc}
.option-btn.selected{border-color:var(--bg); background:var(--bg); color:#fff}
.option-btn.correct{border-color:#28a745; background:#28a745; color:#fff}
.option-btn.wrong{border-color:#dc3545; background:#dc3545; color:#fff}
.fill-blank{display:flex; align-items:center; gap:8px; font-size:22px; font-weight:700; margin:16px 0; justify-content:center}
.fill-blank input{width:200px; max-width:200px; min-width:200px; padding:10px; text-align:center; font-size:22px; font-weight:700; border:2px solid #ddd; border-radius:8px}
.fill-blank input:focus{outline:none; border-color:var(--bg)}
.fill-blank input.correct{border-color:#28a745; background:#d4edda}
.fill-blank input.wrong{border-color:#dc3545; background:#f8d7da}
.matching-game{display:grid; gap:12px; margin:16px 0}
.match-item{display:flex; flex-direction:column; gap:8px; padding:12px; background:#f8fbfc; border-radius:8px}
.match-icon{font-size:20px; font-weight:700; text-align:left; color:var(--text)}
.match-select{width:100%; padding:10px; border:2px solid #ddd; border-radius:8px; font-size:16px; cursor:pointer}
.match-select:focus{outline:none; border-color:var(--bg)}
.match-select.correct{border-color:#28a745; background:#d4edda}
.match-select.wrong{border-color:#dc3545; background:#f8d7da}
.submit-btn{margin-top:16px}
.actions{display:flex; gap:10px; margin-top:18px}

/* OSSD stamp (normal mode) */
#stamp-container{position:relative; height:0}
#stamp-container::after{content:"OSSD"; position:absolute; right:18px; top:-26px; color:#c23b29; border:3px solid #c23b29; padding:6px 12px; border-radius:8px; transform:rotate(-12deg); opacity:0; transition:opacity .3s ease; font-weight:900; background:#fff}
.stamp-show #stamp-container::after{opacity:1}

/* Leaderboard */
#screen-leaderboard{display:grid; place-items:center; padding:24px}
.panel{width:min(760px,94%); background:#fff; border-radius:16px; box-shadow:var(--shadow); padding:18px}
.leaderboard{counter-reset:rank}
.leaderboard li{display:flex; justify-content:space-between; align-items:center; padding:10px 12px; border-bottom:1px solid #eef3f6}
.leaderboard li::before{counter-increment:rank; content:counter(rank) ". "; font-weight:900}
.leader-stats{display:flex; align-items:center; gap:12px}
.btn-delete{appearance:none; border:none; background:#ff4444; color:#fff; width:24px; height:24px; border-radius:50%; cursor:pointer; font-size:18px; line-height:1; display:flex; align-items:center; justify-content:center; transition:all .2s ease}
.btn-delete:hover{background:#cc0000; transform:scale(1.1)}
.btn-delete:active{transform:scale(0.95)}
.panel-actions{display:flex; justify-content:flex-end; gap:10px; margin-top:12px}

/* Reward */
#screen-reward.active{display:grid !important; place-items:center}
#screen-reward{position:relative; min-height:100vh; background:linear-gradient(135deg, #009ec4, #0085a9)}
.confetti{position:absolute; inset:0; pointer-events:none}
.reward{position:relative; z-index:1; width:min(900px,92%); text-align:center; background:#ffffff8e; border-radius:18px; padding:24px; box-shadow:var(--shadow)}
.ossd-stamp{position:absolute; top:16px; right:16px; width:180px; height:auto; transform:rotate(-12deg); filter:drop-shadow(0 6px 12px rgba(0,0,0,.3)); animation:stampDown 2s cubic-bezier(0.34, 1.56, 0.64, 1)}
@keyframes stampDown{
	0%{transform:translateY(-300px) rotate(-12deg) scale(1.5); opacity:0; filter:drop-shadow(0 20px 30px rgba(0,0,0,.5))}
	60%{transform:translateY(0) rotate(-12deg) scale(1); opacity:1; filter:drop-shadow(0 6px 12px rgba(0,0,0,.3))}
	70%{transform:translateY(0) rotate(-12deg) scale(0.95); filter:drop-shadow(0 3px 6px rgba(0,0,0,.4))}
	80%{transform:translateY(0) rotate(-12deg) scale(1.02); filter:drop-shadow(0 8px 14px rgba(0,0,0,.25))}
	100%{transform:translateY(0) rotate(-12deg) scale(1); filter:drop-shadow(0 6px 12px rgba(0,0,0,.3))}
}
.reward-mascot{width:140px; filter:drop-shadow(0 10px 14px rgba(0,0,0,.25))}
.reward-actions{display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin:12px 0}
.qr{opacity:.8; margin-top:16px}
.qr img{width:120px; height:auto}
.qr p{font-size:14px; margin-top:6px}

/* Certificate */
.cert-page{background:#fff; padding:40px 20px; min-height:100vh}
#screen-certificate.active{display:flex !important; justify-content:center; align-items:center}
.cert-container{max-width:800px; width:100%; background:#fff; padding:40px; border:8px solid var(--bg); border-radius:12px; box-shadow:0 0 30px rgba(0,0,0,.15); position:relative}
.cert-header{text-align:center; margin-bottom:20px}
.cert-logo{height:60px; width:auto}
.cert-stamp{position:absolute; top:30px; right:30px; width:120px; opacity:.9; transform:rotate(-12deg); animation:stampDown 2s cubic-bezier(0.34, 1.56, 0.64, 1)}
.cert-title{font-size:42px; color:var(--bg); margin:20px 0; text-align:center; font-weight:900}
.cert-text{font-size:18px; text-align:center; color:#555; margin:12px 0}
.cert-name{font-size:36px; color:var(--accent); text-align:center; margin:16px 0; font-weight:900; text-transform:capitalize}
.cert-photo-wrapper{display:flex; flex-direction:column; align-items:center; margin:24px 0}
.cert-photo{width:180px; height:180px; border-radius:50%; overflow:hidden; border:6px solid var(--bg); position:relative; background:#f0f0f0}
.camera-preview{width:100%; height:100%; object-fit:cover}
.photo-canvas{width:100%; height:100%; object-fit:cover; display:none}
.photo-canvas.show{display:block}
.camera-preview.hide{display:none}
.cert-photo-controls{margin-top:12px; display:flex; gap:8px}
.cert-achievement{font-size:28px; color:var(--bg); text-align:center; margin:16px 0; font-weight:700}
.cert-date{font-size:16px; text-align:center; color:#666; margin-top:24px}
.cert-actions{display:flex; gap:12px; justify-content:center; margin-top:30px}

/* Print styles */
@media print{
	.no-print{display:none !important}
	.cert-page{padding:0; min-height:auto}
	.cert-container{border:none; box-shadow:none; page-break-inside:avoid}
	body{background:#fff}
	@page{margin:0.5cm; size:auto}
	/* Hide URL and page info in footer/header */
	body::after, body::before{display:none !important; content:none !important}
}

/* Toast */
.toast{position:fixed; left:50%; bottom:22px; transform:translateX(-50%) translateY(40px); background:#001f27; color:#fff; padding:12px 16px; border-radius:12px; box-shadow:var(--shadow); opacity:0; transition:all .3s ease; z-index:5}
.toast.show{transform:translateX(-50%) translateY(0); opacity:1}

@media (max-width: 860px){
	.level-inner{grid-template-columns:1fr}
	.mascot{order:2}
	.stage{order:1}
	.cert-title{font-size:32px}
	.cert-name{font-size:28px}
}


